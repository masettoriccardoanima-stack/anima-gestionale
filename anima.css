:root { --muted:#6b7280; }
body { margin:0; font-family:system-ui, Arial, sans-serif; background:#f5f6f8; }
.layout { display:flex; min-height:100vh; }
.sidebar { width:240px; background:#111827; color:#fff; padding:16px; }
.menu-item { padding:8px 10px; border-radius:8px; cursor:pointer; }
.menu-item.active, .menu-item:hover { background:#1f2937; }
.content { flex:1; display:flex; flex-direction:column; }
.topbar { display:flex; gap:12px; align-items:center; padding:10px 16px; background:#fff; border-bottom:1px solid #e5e7eb; }
.page{
  padding: 4px 0 24px;     /* niente padding orizzontale: ci pensa .content */
  display: flex;
  flex-direction: column;
  gap: 12px;               /* distanzia card, toolbar, form fra loro */
}
.input { padding:8px 10px; border:1px solid #d1d5db; border-radius:8px; }
.card { background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:12px; }
.actions { display:flex; gap:8px; align-items:center; }
.btn { padding:8px 12px; border:0; background:#111827; color:#fff; border-radius:10px; cursor:pointer; }
.btn-outline { background:#fff; color:#111827; border:1px solid #111827; }
.grid { display:grid; }
.grid-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); gap:12px; }
.row { display:flex; align-items:center; gap:8px; }
.table { width:100%; border-collapse:collapse; }
.table th, .table td { padding:6px 8px; border-bottom:1px solid #e5e7eb; text-align:left; }
.progress { background:#e5e7eb; height:8px; border-radius:999px; overflow:hidden; }
.progress > div { height:100%; background:#111827; }
.badge-red { color:#b91c1c; }
.badge-yellow { color:#b45309; }
.badge-green { color:#065f46; }
.muted, .small { color:var(--muted); font-size:12px; }
@media (max-width: 900px){
  .sidebar { display:none; }
  .mobilebar { display:flex; justify-content:space-between; align-items:center; padding:10px 12px; background:#111827; color:#fff; }
  .mobilemenu { display:grid; gap:8px; padding:8px; background:#111827; color:#fff; }
}
@media (min-width: 901px){
  .mobilebar, .mobilemenu { display:none; }
}
/* Fix visibilità testo nelle select (Timbratura) */
.timbratura select { 
  color: #111 !important; 
  background: #fff !important; 
}
.timbratura option { 
  color: #111 !important; 
}

/* anti-sormonto input in tabelle e form */
.table input, .table select, .table textarea { width: 100%; max-width: 100%; box-sizing: border-box; }
.form { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }

.grid{display:grid;gap:12px}
.actions{display:flex;gap:8px;align-items:center;justify-content:space-between}
.card{background:#fff;border:1px solid #e5e7eb;border-radius:8px;padding:12px}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border:1px solid #e5e7eb;padding:6px}
.btn{padding:6px 10px;border-radius:6px;border:1px solid #d1d5db;background:#111827;color:#fff;cursor:pointer}
.btn-outline{background:#fff; color:#111827}
.form{display:grid;gap:8px}
/* FIX: ripristino stile scuro pulsanti + colore del menù attivo */
.btn{ padding:8px 12px; border:0; background:#111827; color:#fff; border-radius:10px; cursor:pointer; }
.menu-item.active{ background:#1f2937; color:#fff; }

.app-layout { display:flex; min-height:100vh; }
.sidebar { width:240px; background:#0b1220; color:#fff; padding:12px; }
.sidebar .brand { font-weight:700; margin-bottom:12px; letter-spacing:0.5px; }
.nav { display:flex; flex-direction:column; gap:6px; }
.nav-link { color:#cbd5e1; text-decoration:none; padding:6px 8px; border-radius:6px; display:block; }
.nav-link:hover, .nav-link.active { background:#111827; color:#fff; }
.content { flex:1; padding:16px; }
.actions { display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
.actions .btn { white-space:nowrap; }

.row { display:flex; flex-wrap:wrap; gap:8px; align-items:center; }

.card { overflow:hidden; }
.content { overflow:auto; }

.sidebar .nav { display:flex; flex-direction:column; gap:6px; }
.sidebar a.nav-link { display:block; padding:8px 10px; line-height:1.2; }

.table { width:100%; border-collapse:collapse; }
.table th, .table td { padding:8px; vertical-align:middle; }
.table th.right, .table td.right { text-align:right; }

@media (max-width: 768px){
  .groupTitle { margin-top:12px; }
  .table th:nth-child(5), .table td:nth-child(5) { white-space:nowrap; }
}

.sidebar .brand{font-weight:700;margin:14px 12px 8px}
.sidebar .groupTitle{margin:16px 12px 6px;font-size:12px;letter-spacing:.08em;color:#94a3b8;text-transform:uppercase}
.nav .nav-link{display:block;padding:10px 12px;border-radius:8px;text-decoration:none;color:#cbd5e1}
.nav .nav-link:hover{background:#111827;color:#fff}
.nav .nav-link.active{background:#1f2937;color:#fff}

label{display:block;margin-bottom:4px;color:#94a3b8}
input,select,textarea{width:100%;min-width:0}
.actions{gap:8px}
.table .btn { padding: 4px 10px; font-size: 12px; }
.dropdown-menu .btn { margin: 2px 0; }
/* --- Fix dropdown nelle tabelle (menu '...') --- */
.card { overflow: visible; }               /* prima era hidden */
.table th, .table td {
  position: relative;
  overflow: visible;                       /* consenti al menu di "uscire" */
}

.dropdown { position: relative; }
.dropdown-menu{
  position: absolute;
  right: 0;
  top: calc(100% + 6px);
  min-width: 180px;
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  padding: 8px;
  box-shadow: 0 12px 30px rgba(0,0,0,.12);
  z-index: 99999;                          /* sopra a tutto */
}
.dropdown-menu button{
  display: block;
  width: 100%;
  text-align: left;
  padding: 6px 8px;
  background: transparent;
  border: 0;
  border-radius: 6px;
  cursor: pointer;
}
.dropdown-menu button:hover{ background:#f3f4f6; }


/* evita che i contenuti vengano "ritagliati" dalle card */
.card{ overflow: visible; }

/* ====== TABELLE E AZIONI ====== */
.table{ width:100%; border-collapse: separate; border-spacing: 0; }
.table th, .table td{ vertical-align: middle; }

/* pulsanti compatti dentro le tabelle */
.table .btn{
  padding: 6px 10px;
  font-size: 12px;
  line-height: 1.1;
  border-radius: 10px;
}
.table .btn + .btn{ margin-left: 6px; }

/* se vuoi più robustezza nel wrap delle azioni anche senza cambiare JS */
.table tr > td:last-child{
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

/* ====== DROPDOWN/MENU (se usati) ====== */
.dropdown{ position: relative; }
.dropdown-menu{
  position: absolute;
  right: 0; top: calc(100% + 6px);
  min-width: 180px;
  background: #fff; border:1px solid #e5e7eb; border-radius: 10px;
  box-shadow: 0 12px 30px rgba(0,0,0,.12);
  padding: 8px; z-index: 9999;
}

/* ====== FORM SPACING (label non attaccate) ====== */
.form > div{ margin-bottom: 12px; }
.form label{ display:block; margin-bottom: 6px; font-weight:600; }
input, select, textarea{ padding: 8px 10px; }

/* ====== MINI FIX VARI ====== */
.brand{ font-weight:800; letter-spacing: .4px; }
.table .btn{ padding:4px 8px; font-size:11px; border-radius:8px; }
/* ====== LAYOUT GUARDRAILS ====== */
:root{
  --sidebar-w: 260px;        /* larghezza sidebar */
  --sessionbar-safe: 148px;  /* spazio per il box admin/logout in alto a dx */
}

/* sidebar sempre visibile, niente overlay sulla tabella */
.sidebar{
  position: fixed;
  top: 0; left: 0; bottom: 0;
  width: var(--sidebar-w);
  z-index: 30;
  overflow-y: auto;
}

/* contenuto spostato a destra e con padding anche a destra per la SessionBar */
.content{
  margin-left: var(--sidebar-w);
  padding: 16px 20px 96px;
  padding-right: calc(var(--sessionbar-safe) + 16px);
  min-height: 100vh;
  position: relative;
  z-index: 1;
  box-sizing: border-box;
}

/* carte/tabelle non devono “tagliare” i menù o i pulsanti */
.card{ overflow: visible; }

/* ====== TABELLE ====== */
.table{
  width: 100%;
  table-layout: auto;       /* lascia respirare le colonne */
  border-collapse: collapse;
}

/* righe con altezza “aria” minima */
.table th, .table td{
  vertical-align: middle;
  padding: 8px 10px;
}

/* colonne testuali lunghe ellissate, così la colonna Azioni resta usabile */
.table td:nth-child(2),
.table td:nth-child(3){
  max-width: 420px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* header leggermente evidenziato */
.table thead tr{
  background: #f9fafb;
}

/* zebra rows per il corpo */
.table tbody tr:nth-child(even){
  background: #f3f4f6;
}

/* hover leggero per capire dove sei */
.table tbody tr:hover{
  background: #e5e7eb;
}

/* numeri allineati a destra, centrate le colonne con classi .ctr/.num se usate */
.table td.num,
.table th.num{
  text-align: right;
}
.table td.ctr,
.table th.ctr{
  text-align: center;
}

/* ULTIMA COLONNA = area comandi: sempre flex, con WRAP e gap */
.table td:last-child{
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: flex-start;   /* o 'flex-end' se preferisci allineata a dx */
}

/* bottoni compatti dentro le tabelle */
.table td:last-child .btn{
  padding: 4px 10px;       /* più piccoli = più bottoni visibili */
  font-size: 12px;
  line-height: 1.2;
}

/* evita che i bottoni si “incollino” al bordo della cella */
.table td:last-child > *{
  margin: 0;
}

/* quando la viewport è stretta, permetti lo scroll orizzontale della tabella */
@media (max-width: 1100px){
  .card { overflow-x: auto; }
  .table { min-width: 860px; }
}

/* ====== FORM SPACING (etichette/campi non attaccati) ====== */
.form label{
  display: block;
  margin-bottom: 4px;
  font-weight: 600;
}
.form input, .form select, .form textarea{
  margin-bottom: 10px;
}

/* Sidebar a colonna + box utente in basso */
.sidebar{
  display:flex;
  flex-direction:column;
}

.sidebar nav{
  flex:1 1 auto;
  display:flex;
  flex-direction:column;
}


/* ====== FORM: titoli di sezione e righe ====== */

/* piccolo titolo grigio per separare blocchi logici */
.form-group-title{
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:.08em;
  color:#6b7280;
  font-weight:600;
}

/* riga di form generica */
.form-row{
  min-width:0;
}

/* riga a tutta larghezza nella griglia */
.form-row.form-row-full{
  grid-column:1 / -1;
}

/* textarea un filo più comodo */
.form textarea{
  min-height:60px;
  resize:vertical;
}

/* ===== HOTFIX LAYOUT + TABELLE (DEVE STARE ALLA FINE) ===== */
:root{
  --sidebar-w: 260px;
  --sessionbar-safe: 148px;
}

/* Sidebar fissa a sinistra; contenuto spostato a destra */
.sidebar{
  position: fixed;
  top: 0; left: 0; bottom: 0;
  width: var(--sidebar-w);
  background:#0b1220; color:#fff;
  padding:12px;
  z-index: 30;
  overflow-y: auto;
}
.content{
  margin-left: calc(var(--sidebar-w) + 8px);
  padding: 16px 20px 96px;
  padding-right: calc(var(--sessionbar-safe) + 16px);
  min-height: 100vh;
  min-width: 0;              /* sblocca shrink, niente “taglio” a destra */
  overflow: auto;
  box-sizing: border-box;
}

/* Tabelle: niente nowrap, niente fixed, bottoni che vanno a capo */
.table{
  width:100%;
  table-layout: auto;
  border-collapse: collapse;
}
.table th, .table td{
  padding: 8px 10px;
  vertical-align: middle;
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
}

/* Colonna Azioni reattiva: flex + wrap, senza larghezza fissa */
.table td:last-child{
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  width: auto;
}
.table td:last-child .btn{
  padding: 6px 10px;
  font-size: 12px;
  line-height: 1.2;
}

/* Se lo schermo è stretto, abilita scroll orizzontale sulla card tabella */
@media (max-width: 1100px){
  .card { overflow-x: auto; }
  .table { min-width: 860px; }
}

/* ====== FORM: titoli di sezione e righe ====== */
.form-group-title{
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:.08em;
  color:#6b7280;
  font-weight:600;
  margin-top:4px;
}

/* Spaziatura form leggibile */
.form label{ display:block; margin-bottom:6px; font-weight:600; }
.form input,.form select,.form textarea{ margin-bottom:10px; }

/* ====== SESSION BAR (box utente/logout) ====== */
.sessionbar{
  position: fixed;
  right: 16px;
  bottom: 16px;
  left: auto;
  z-index: 40;

  padding: 8px 10px;
  border-radius: 10px;
  background: rgba(15,23,42,.95);
  border: 1px solid rgba(148,163,184,.5);
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: #e5e7eb;
}

.sessionbar-info{
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}
.sessionbar-role{
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: .06em;
  font-size: 11px;
  color: #f97316; /* arancio ANIMA */
}
.sessionbar-mail{
  max-width: 200px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  opacity: .9;
}

.sessionbar .btn-logout{
  padding: 4px 8px;
  font-size: 11px;
}

.sessionbar .btn-login{
  padding: 4px 10px;
  font-size: 12px;
  line-height: 1.2;
}

@media (max-width: 1024px){
  .sessionbar{
    left: 16px;
    right: 16px;
    justify-content: space-between;
  }
}

/* === MOBILE SHELL & HAMBURGER (aggiunta) === */

/* 100dvh sicuro su mobile */
:root { --vh: 1vh; }
@supports (height: 100dvh) {
  :root { --vh: 1dvh; }
}
html, body { height: calc(100 * var(--vh)); }
#root, #root > * { min-height: calc(100 * var(--vh)); }

/* Utility per visibilità mobile/desktop */
.mobile-only { display: none !important; }
@media (max-width: 1024px) {
  .hide-on-mobile { display: none !important; }
  .mobile-only { display: block !important; }
}

/* Hamburger */
#anima-hamburger {
  position: fixed; z-index: 1002; left: 12px; top: 12px;
  width: 42px; height: 42px; border-radius: 10px;
  border: 0; outline: 0; cursor: pointer;
  font-size: 22px; line-height: 42px; text-align: center;
  background: #0b1220; color: #fff; box-shadow: 0 4px 16px rgba(0,0,0,.25);
}
@media (min-width: 1025px){ #anima-hamburger { display:none; } }

/* Drawer laterale */
#anima-drawer {
  position: fixed; z-index: 1001; top: 0; left: 0; bottom: 0;
  width: 78vw; max-width: 320px;
  transform: translateX(-100%);
  background: #0b1220; color: #fff;
  box-shadow: 10px 0 24px rgba(0,0,0,.25);
  transition: transform .25s ease;
  padding: 16px 12px 24px 12px;
  overflow-y: auto;
}
#anima-drawer.open { transform: translateX(0); }
#anima-drawer h3 { margin: 8px 6px 12px; font-size: 18px; opacity: .8; }
#anima-drawer a.drawer-link {
  display: block; padding: 12px 10px; margin: 4px 4px;
  border-radius: 10px; text-decoration: none;
  color: #fff; background: rgba(255,255,255,.06);
}
#anima-drawer a.drawer-link:active { transform: translateY(1px); }

/* Footer fisso per pulsanti “conferma” in mobile (se lo usi) */
.mobile-fixed-footer {
  position: sticky; bottom: 0; z-index: 5;
  background: rgba(11,18,32,.9); backdrop-filter: blur(6px);
  padding: 10px; border-top: 1px solid rgba(255,255,255,.12);
}

/* Pulsanti grandi (usali dove serve nella timbratura) */
.btn-lg { min-height: 48px; padding: 10px 16px; font-size: 16px; border-radius: 12px; }

/* === MOBILE OVERRIDES FINALI (DEVONO STARE ALLA FINE) === */
@media (max-width: 1024px){
  .sidebar{
    display: none !important;
    position: static !important;
    width: 0 !important;
    left: 0 !important; top: 0 !important; bottom: auto !important;
    transform: none !important;
  }
  .content, .app-layout .content, body .content {
    margin: 0 !important;
    padding: 12px 12px 80px !important;
    min-height: 100dvh !important;
    overflow: auto !important;
  }
  html, body, #root, #root > *{
    min-height: 100dvh !important;
    height: auto !important;
  }
}
/* === Restore link visibili (vince su tutto) === */
.sidebar a[href="#/dashboard"],
.sidebar a[href="#/sistema"]{
  display: block !important;
  visibility: visible !important;
  pointer-events: auto !important;
  opacity: 1 !important;
}
.sidebar a[href="#/dashboard"], .sidebar a[href="#/sistema"] {
  display:block !important; visibility:visible !important; pointer-events:auto !important; opacity:1 !important;
}
/* === Sidebar: stato compresso (persistente) === */
body.sidebar-collapsed .sidebar { width: 64px; padding: 12px 8px; }
body.sidebar-collapsed .sidebar .brand { text-align: center; }
body.sidebar-collapsed .sidebar .nav-link { text-align: center; }
body.sidebar-collapsed .sidebar .nav-text { display: none; }

/* (opzionale) stringi un filo il padding del content quando compresso */
body.sidebar-collapsed .content { padding-left: 16px; }

/* Nascondi sidebar legacy quando è presente la nuova .sidebar */
body:has(aside.sidebar) aside.card { display: none !important; }
/* fallback senza :has — se la legacy è dopo la nuova */
aside.sidebar + aside.card, aside.sidebar ~ aside.card { display: none !important; }










